# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#  Arbiter AI Backend — Environment Variables (.env.example)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
#
#  Copy this file to .env and fill in your values.
#  See config.py for the full developer quick-start guide.
#
#  APP_MODE controls the runtime tier:
#    mock        → No keys needed, everything faked (perfect for frontend dev)
#    sandbox     → Real DB, sandbox API keys  (default for local dev)
#    production  → All keys required, strict validation on startup
#
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# ─── App ──────────────────────────────────────────────────────────────────────
APP_MODE=sandbox
APP_ENV=development
LOG_LEVEL=DEBUG
ALLOWED_ORIGINS=http://localhost:3000
APP_BASE_URL=http://localhost:3000
# Number of trusted reverse proxies in front of the backend.
# Use 1 for AWS ALB/ECS deployments.
TRUSTED_PROXY_HOPS=0

# ─── Database (asyncpg) ──────────────────────────────────────────────────────
DATABASE_URL=postgresql+asyncpg://arbiter:arbiter_dev@localhost:5432/arbiter

# ─── Redis ────────────────────────────────────────────────────────────────────
REDIS_URL=redis://localhost:6379/0

# ─── Auth (must match frontend AUTH_SECRET / NEXTAUTH_SECRET) ─────────────────
NEXTAUTH_SECRET=changeme_in_production_secret_key_12345

# ─── Stripe (use test-mode keys for sandbox) ─────────────────────────────────
STRIPE_SECRET_KEY=sk_test_...
STRIPE_PRICE_ID=price_...
# Run `stripe listen --forward-to localhost:8000/api/v1/billing/webhooks/stripe`
# and paste the whsec_... it prints here:
STRIPE_WEBHOOK_SECRET=whsec_...

# ─── AI Providers (defaults: bedrock + flashrank + pgvector) ──────────────────
# LLM_PROVIDER=bedrock
# EMBEDDING_PROVIDER=bedrock
# RERANKER_PROVIDER=flashrank
# VECTOR_STORE_PROVIDER=pgvector

# AWS Bedrock (boto3 auto-discovers creds from env, profile, or IAM role)
# AWS_REGION=us-east-1
# AWS_ACCESS_KEY_ID=...
# AWS_SECRET_ACCESS_KEY=...

# To use OpenAI instead of Bedrock:
# LLM_PROVIDER=openai
# EMBEDDING_PROVIDER=openai
# OPENAI_API_KEY=sk-...

# Optional periodic sync services (Celery Beat)
# CATALOG_SYNC_ENABLED=true
# CATALOG_SYNC_CRON=15 */6 * * *
# CATALOG_RANKED_GAME_LIMIT=1000
# OPEN_RULES_SYNC_ENABLED=true
# OPEN_RULES_SYNC_CRON=45 4 * * *
# OPEN_RULES_MAX_DOCUMENTS=20
# OPEN_RULES_ALLOWED_LICENSES=creative commons,open gaming license,orc
# OPEN_RULES_FORCE_REINDEX=false

# ─── Frontend auth email provider keys (optional reminder) ───────────────────
# These are consumed by the frontend service (SES default).
# EMAIL_SERVER=smtp://SMTP_USERNAME:SMTP_PASSWORD@email-smtp.us-east-1.amazonaws.com:587
# BREVO_API_KEY=...   # only when EMAIL_PROVIDER=brevo
